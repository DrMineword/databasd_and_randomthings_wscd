{"html":"PGh0bWw+PGhlYWQ+CiAgICA8dGl0bGU+RXhhbXBsZSBEb21haW48L3RpdGxlPgoKICAgIDxtZXRhIGNoYXJzZXQ9InV0Zi04Ij4KICAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtdHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgICA8c3R5bGU+CgkJcCB7CiAgICAgICAgY29sb3I6IGJsYWNrOwogICAgfQogICAgYm9keSB7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2YwZjBmMjsKICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgcGFkZGluZzogMDsKICAgICAgICBmb250LWZhbWlseTogLWFwcGxlLXN5c3RlbSwgc3lzdGVtLXVpLCBCbGlua01hY1N5c3RlbUZvbnQsICJTZWdvZSBVSSIsICJPcGVuIFNhbnMiLCAiSGVsdmV0aWNhIE5ldWUiLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmOwogICAgICAgIAogICAgfQogICAgZGl2IHsKICAgICAgICB3aWR0aDogNjAwcHg7CiAgICAgICAgbWFyZ2luOiA1ZW0gYXV0bzsKICAgICAgICBwYWRkaW5nOiAyZW07CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZkZmRmZjsKICAgICAgICBib3JkZXItcmFkaXVzOiAwLjVlbTsKICAgICAgICBib3gtc2hhZG93OiAycHggM3B4IDdweCAycHggcmdiYSgwLDAsMCwwLjAyKTsKICAgIH0KICAgIGE6bGluaywgYTp2aXNpdGVkIHsKICAgICAgICBjb2xvcjogIzM4NDg4ZjsKICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICB9CiAgICBAbWVkaWEgKG1heC13aWR0aDogNzAwcHgpIHsKICAgICAgICBkaXYgewogICAgICAgICAgICBtYXJnaW46IDAgYXV0bzsKICAgICAgICAgICAgd2lkdGg6IGF1dG87CiAgICAgICAgfQogICAgfQogICAgPC9zdHlsZT4gICAgCjwvaGVhZD4KCjxib2R5IGN6LXNob3J0Y3V0LWxpc3Rlbj0idHJ1ZSI+CjxkaXY+Cgk8aDE+PGNlbnRlcj53c2NkL0NvcnBvcmF0aW9uIFBhZ2VzPC9jZW50ZXI+PC9oMT4KCTxwPldlbGNvbWUgdG8gd3NjZC9Db3Jwb3JhdGlvbiBQYWdlcywgaGVyZSB5b3Ugd2lsbCBmaW5kIGNvcnBvcmF0ZSBwYWdlcyB1cGRhdGVkIGhvdXJseQoJCTxicj4KCQk8YnI+CgkJPGJyPlllcywgdGhhdCdzIGFsbCwgYmVjYXVzZSBJIGhhdmUgbm8gaWRlYSBob3cgb3Igd2hhdCBwdXQgaW4gdGhpcyBwYWdlPGJyPgo8L3A+CjwvZGl2Pjxicj4KPGRpdj4KICAgIDxoMT48Y2VudGVyPkhlbHBmdWwgTGlua3M8L2NlbnRlcj48L2gxPgoKICAgIDwhLS0gQ29ycG9yYXRpb24gTGlzdCAtIE5vcm1hbCAtLT4KICAgIDxwPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZHJtaW5ld29yZC5naXRodWIuaW8vQXJ0ZWZhY3QtQm9vc3QtQWN0aXZlL3Jvb3QvcGFnZXMvY29ycHBhZ2VzP2lkPXBhZ2VzL24vbGlzdF9hc2MvdHJ1ZSI+Q29ycG9yYXRpb24gTGlzdCAoTm9ybWFsLCBBc2NlbmRpbmcpPC9hPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kcm1pbmV3b3JkLmdpdGh1Yi5pby9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcm9vdC9wYWdlcy9jb3JwcGFnZXM/aWQ9cGFnZXMvbi9saXN0X2FzYy9mYWxzZSI+Q29ycG9yYXRpb24gTGlzdCAoTm9ybWFsLCBEZXNjZW5kaW5nKTwvYT4KICAgIDwvcD4KICAgIDxwPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZHJtaW5ld29yZC5naXRodWIuaW8vQXJ0ZWZhY3QtQm9vc3QtQWN0aXZlL3Jvb3QvcGFnZXMvY29ycHBhZ2VzP2lkPXBhZ2VzL24vd2luL3RvcCI+Q29ycG9yYXRpb24gTGlzdCAoTm9ybWFsLCBUb3AgV2lucyk8L2E+CiAgICA8L3A+CiAgICA8cD4KICAgICAgICA8YSBocmVmPSJodHRwczovL2RybWluZXdvcmQuZ2l0aHViLmlvL0FydGVmYWN0LUJvb3N0LUFjdGl2ZS9yb290L3BhZ2VzL2NvcnBwYWdlcz9pZD1wYWdlcy9uL2xvc2UvdG9wIj5Db3Jwb3JhdGlvbiBMaXN0IChOb3JtYWwsIFRvcCBMb3NzZXMpPC9hPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kcm1pbmV3b3JkLmdpdGh1Yi5pby9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcm9vdC9wYWdlcy9jb3JwcGFnZXM/aWQ9cGFnZXMvbi9lbG8vdG9wIj5Db3Jwb3JhdGlvbiBMaXN0IChOb3JtYWwsIFRvcCBFTE8pPC9hPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kcm1pbmV3b3JkLmdpdGh1Yi5pby9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcm9vdC9wYWdlcy9jb3JwcGFnZXM/aWQ9cGFnZXMvbi9lbG8vYm90dG9tIj5Db3Jwb3JhdGlvbiBMaXN0IChOb3JtYWwsIEJvdHRvbSBFTE8pPC9hPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kcm1pbmV3b3JkLmdpdGh1Yi5pby9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcm9vdC9wYWdlcy9jb3JwcGFnZXM/aWQ9cGFnZXMvbi9kcmF3L3RvcCI+Q29ycG9yYXRpb24gTGlzdCAoTm9ybWFsLCBUb3AgRHJhd3MpPC9hPgogICAgPC9wPgoKICAgIDwhLS0gQ29ycG9yYXRpb24gTGlzdCAtIExpdGUgLS0+CiAgICA8cD4KICAgICAgICA8YSBocmVmPSJodHRwczovL2RybWluZXdvcmQuZ2l0aHViLmlvL0FydGVmYWN0LUJvb3N0LUFjdGl2ZS9yb290L3BhZ2VzL2NvcnBwYWdlcz9pZD1wYWdlcy9saXRlL2xpc3RfYXNjL3RydWUiPkNvcnBvcmF0aW9uIExpc3QgKExpdGUsIEFzY2VuZGluZyk8L2E+CiAgICA8L3A+CiAgICA8cD4KICAgICAgICA8YSBocmVmPSJodHRwczovL2RybWluZXdvcmQuZ2l0aHViLmlvL0FydGVmYWN0LUJvb3N0LUFjdGl2ZS9yb290L3BhZ2VzL2NvcnBwYWdlcz9pZD1wYWdlcy9saXRlL2xpc3RfYXNjL2ZhbHNlIj5Db3Jwb3JhdGlvbiBMaXN0IChMaXRlLCBEZXNjZW5kaW5nKTwvYT4KICAgIDwvcD4KICAgIDxwPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZHJtaW5ld29yZC5naXRodWIuaW8vQXJ0ZWZhY3QtQm9vc3QtQWN0aXZlL3Jvb3QvcGFnZXMvY29ycHBhZ2VzP2lkPXBhZ2VzL2xpdGUvd2luL3RvcCI+Q29ycG9yYXRpb24gTGlzdCAoTGl0ZSwgVG9wIFdpbnMpPC9hPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kcm1pbmV3b3JkLmdpdGh1Yi5pby9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcm9vdC9wYWdlcy9jb3JwcGFnZXM/aWQ9cGFnZXMvbGl0ZS9sb3NlL3RvcCI+Q29ycG9yYXRpb24gTGlzdCAoTGl0ZSwgVG9wIExvc3Nlcyk8L2E+CiAgICA8L3A+CiAgICA8cD4KICAgICAgICA8YSBocmVmPSJodHRwczovL2RybWluZXdvcmQuZ2l0aHViLmlvL0FydGVmYWN0LUJvb3N0LUFjdGl2ZS9yb290L3BhZ2VzL2NvcnBwYWdlcz9pZD1wYWdlcy9saXRlL2Vsby90b3AiPkNvcnBvcmF0aW9uIExpc3QgKExpdGUsIFRvcCBFTE8pPC9hPgogICAgPC9wPgogICAgPHA+CiAgICAgICAgPGEgaHJlZj0iaHR0cHM6Ly9kcm1pbmV3b3JkLmdpdGh1Yi5pby9BcnRlZmFjdC1Cb29zdC1BY3RpdmUvcm9vdC9wYWdlcy9jb3JwcGFnZXM/aWQ9cGFnZXMvbGl0ZS9lbG8vYm90dG9tIj5Db3Jwb3JhdGlvbiBMaXN0IChMaXRlLCBCb3R0b20gRUxPKTwvYT4KICAgIDwvcD4KICAgIDxwPgogICAgICAgIDxhIGhyZWY9Imh0dHBzOi8vZHJtaW5ld29yZC5naXRodWIuaW8vQXJ0ZWZhY3QtQm9vc3QtQWN0aXZlL3Jvb3QvcGFnZXMvY29ycHBhZ2VzP2lkPXBhZ2VzL2xpdGUvZHJhdy90b3AiPkNvcnBvcmF0aW9uIExpc3QgKExpdGUsIFRvcCBEcmF3cyk8L2E+CiAgICA8L3A+CjwvZGl2Pgo8ZGl2PgogICAgPGgxPjxjZW50ZXI+QmlnIFRoYW5rcyE8L2NlbnRlcj48L2gxPgogICAgPGNlbnRlcj48cD5XZSB3b3VsZCBsaWtlIHRvIGdpdmUgYSBodWdlIHRoYW5rIHlvdSB0bzo8L3A+CiAgICA8dWw+CiAgICAgICAgPGxpPgogICAgICAgICAgICA8c3Ryb25nPjxhIGhyZWY9Imh0dHBzOi8vd3MudHNsLnJvY2tzLyIgdGFyZ2V0PSJfYmxhbmsiPkhhZGVzJyBTdGFyIENvbW11bml0eSBEYXRhPC9hPjwvc3Ryb25nPiBmb3IgcHJvdmlkaW5nIGludmFsdWFibGUgZGF0YSBhbmQgc3VwcG9ydCBmb3IgdGhpcyBwcm9qZWN0LiAKICAgICAgICAgICAgPGJyPgogICAgICAgICAgICBNYWRlIGJ5IDxzdHJvbmc+Q2FwcmljYW5EUko8L3N0cm9uZz4KICAgICAgICAgICAgPGJyPgogICAgICAgICAgICA8aW1nIHNyYz0iaHR0cHM6Ly9jZG4uZGlzY29yZGFwcC5jb20vYXZhdGFycy80NTQ0NTkwODk3MjA5NjcxNjgvYV80NzNiOWUxNmQ2NGE5YTAzZjFkNjQ0OWJlZDExOGUzZi5naWY/c2l6ZT00MDk2IiBhbHQ9IkNhcHJpY2FuRFJKIiB3aWR0aD0iNDAiIGhlaWdodD0iNDAiPgogICAgICAgIDwvbGk+CiAgICAgICAgPGxpPgogICAgICAgICAgICA8c3Ryb25nPjxhIGhyZWY9Imh0dHBzOi8vd3MubWVudGFsaXNpdC5teWRzLm1lLyIgdGFyZ2V0PSJfYmxhbmsiPkFQSTogTWVudGFsaXNpdDwvYT48L3N0cm9uZz4gZm9yIHRoZSBmYW50YXN0aWMgQVBJIHRoYXQgcG93ZXJzIGEgbG90IG9mIG91ciBmZWF0dXJlcy4KICAgICAgICAgICAgPGJyPgogICAgICAgICAgICBNYWRlIGJ5IDxzdHJvbmc+bWVudGFsaXNpdDwvc3Ryb25nPgogICAgICAgICAgICA8YnI+CiAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2Nkbi5kaXNjb3JkYXBwLmNvbS9hdmF0YXJzLzU4Mjg4MjEzNzg0MjEyMjc3My9jNDFkMTgzZmJhNzhiOWY0OWJiNTkwYTFmYzhlMzNhOS5wbmc/c2l6ZT00MDk2IiBhbHQ9Im1lbnRhbGlzaXQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCI+CiAgICAgICAgPC9saT4KICAgICAgICA8bGk+CiAgICAgICAgICAgIDxzdHJvbmc+PGEgaHJlZj0iaHR0cHM6Ly9kaXNjb3JkLmdnL3A1ODhlSGFGcWgiIHRhcmdldD0iX2JsYW5rIj5XUyBDb21tdW5pdHkgTGVhZGVyYm9hcmQgRGlzY29yZCBTZXJ2ZXI8L2E+PC9zdHJvbmc+IGZvciBmb3N0ZXJpbmcgYW4gYW1hemluZyBjb21tdW5pdHkuCiAgICAgICAgICAgIDxicj4KICAgICAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vY2RuLmRpc2NvcmRhcHAuY29tL2ljb25zLzgwMDU5ODE2ODkwNjc2MDIwMi84MjVlZTg0NGU2YjQ5MWQ0YmM0OGI1YjAxNTI2NDcxMy53ZWJwP3NpemU9NjQwIiBhbHQ9IkRpc2NvcmQgU2VydmVyIiB3aWR0aD0iNTAiIGhlaWdodD0iNTAiPgogICAgICAgIDwvbGk+CiAgICA8L3VsPgoJPC9jZW50ZXI+CjwvZGl2PgoKCgoKCjwvYm9keT4KPHNjcmlwdD4KYXN5bmMgZnVuY3Rpb24gbmFtZV9pY29uKG5hbWVfYmFzZTY0LCBpY29uX2Jhc2U2NCkgewogICAgdHJ5IHsKICAgICAgICAvLyBEZWNvZGUgYW5kIHNldCBwYWdlIHRpdGxlIHdpdGggcHJvcGVyIGVuY29kaW5nIGhhbmRsaW5nIGZvciB1bnVzdWFsIGNoYXJhY3RlcnMKICAgICAgICBjb25zdCBkZWNvZGVkVGl0bGUgPSBkZWNvZGVCYXNlNjQobmFtZV9iYXNlNjQpOwogICAgICAgIGRvY3VtZW50LnRpdGxlID0gZGVjb2RlZFRpdGxlOwoKICAgICAgICAvLyBDb252ZXJ0IEJhc2U2NCB0byBCbG9iCiAgICAgICAgY29uc3QgYnl0ZUNoYXJhY3RlcnMgPSBhdG9iKGljb25fYmFzZTY0KTsKICAgICAgICBjb25zdCBieXRlTnVtYmVycyA9IG5ldyBBcnJheShieXRlQ2hhcmFjdGVycy5sZW5ndGgpOwogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnl0ZUNoYXJhY3RlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgYnl0ZU51bWJlcnNbaV0gPSBieXRlQ2hhcmFjdGVycy5jaGFyQ29kZUF0KGkpOwogICAgICAgIH0KICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShieXRlTnVtYmVycyk7CiAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtieXRlQXJyYXldLCB7IHR5cGU6ICJpbWFnZS9wbmciIH0pOwogICAgICAgIGNvbnN0IGJsb2JVcmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwoKICAgICAgICAvLyBTZXQgZmF2aWNvbiB1c2luZyBCbG9iIFVSTAogICAgICAgIGxldCBsaW5rID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigibGlua1tyZWx+PSdpY29uJ10iKTsKICAgICAgICBpZiAoIWxpbmspIHsKICAgICAgICAgICAgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImxpbmsiKTsKICAgICAgICAgICAgbGluay5yZWwgPSAiaWNvbiI7CiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7CiAgICAgICAgfQogICAgICAgIGxpbmsuaHJlZiA9IGJsb2JVcmw7CgogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBzZXR0aW5nIG5hbWUgb3IgaWNvbjoiLCBlcnJvcik7CiAgICB9Cn0KCi8vIEhlbHBlciBmdW5jdGlvbiB0byBkZWNvZGUgQmFzZTY0IHByb3Blcmx5IGZvciBVbmljb2RlIHN1cHBvcnQKZnVuY3Rpb24gZGVjb2RlQmFzZTY0KGJhc2U2NCkgewogICAgY29uc3QgYmluYXJ5U3RyaW5nID0gYXRvYihiYXNlNjQpOwogICAgY29uc3QgYnl0ZUFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYmluYXJ5U3RyaW5nLmxlbmd0aCk7CgogICAgLy8gQ29udmVydCBiaW5hcnkgc3RyaW5nIHRvIFVpbnQ4QXJyYXkKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmluYXJ5U3RyaW5nLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgYnl0ZUFycmF5W2ldID0gYmluYXJ5U3RyaW5nLmNoYXJDb2RlQXQoaSk7CiAgICB9CgogICAgLy8gRGVjb2RlIHRoZSBieXRlIGFycmF5IHVzaW5nIFRleHREZWNvZGVyICh0byBoYW5kbGUgYW55IFVuaWNvZGUgY2hhcmFjdGVycykKICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoInV0Zi04Iik7CiAgICByZXR1cm4gZGVjb2Rlci5kZWNvZGUoYnl0ZUFycmF5KTsKfQoKCgovLyBjb2xvcnMKCmZ1bmN0aW9uIHNldF9iYWNrZ3JvdW5kKGJhc2U2NCkgewogICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7CiAgICBpbWcuc3JjID0gImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwiICsgYmFzZTY0OwogICAgaW1nLmNyb3NzT3JpZ2luID0gIkFub255bW91cyI7ICAKCiAgICBpbWcub25sb2FkID0gZnVuY3Rpb24oKSB7CiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIik7CiAgICAgICAgY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoIjJkIik7CgogICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDsKICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgMCwgMCwgaW1nLndpZHRoLCBpbWcuaGVpZ2h0KTsKCiAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpOwogICAgICAgIGNvbnN0IHBpeGVscyA9IGltYWdlRGF0YS5kYXRhOwoKICAgICAgICBsZXQgY29sb3JDb3VudHMgPSB7fTsKICAgICAgICBsZXQgc3RlcCA9IDQgKiBNYXRoLmZsb29yKChjYW52YXMud2lkdGggKiBjYW52YXMuaGVpZ2h0KSAvIDUwMCk7CgogICAgICAgIGxldCB1bmlxdWVDb2xvcnMgPSBuZXcgU2V0KCk7CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwaXhlbHMubGVuZ3RoOyBpICs9IHN0ZXApIHsKICAgICAgICAgICAgbGV0IHIgPSBwaXhlbHNbaV07CiAgICAgICAgICAgIGxldCBnID0gcGl4ZWxzW2kgKyAxXTsKICAgICAgICAgICAgbGV0IGIgPSBwaXhlbHNbaSArIDJdOwogICAgICAgICAgICB1bmlxdWVDb2xvcnMuYWRkKGAke3J9LCR7Z30sJHtifWApOwogICAgICAgIH0KCiAgICAgICAgdW5pcXVlQ29sb3JzID0gQXJyYXkuZnJvbSh1bmlxdWVDb2xvcnMpLm1hcChjID0+IGMuc3BsaXQoIiwiKS5tYXAoTnVtYmVyKSk7CgogICAgICAgIGZ1bmN0aW9uIHJnYlRvSGV4KFtyLCBnLCBiXSkgewogICAgICAgICAgICByZXR1cm4gYCMkeygoMSA8PCAyNCkgKyAociA8PCAxNikgKyAoZyA8PCA4KSArIGIpLnRvU3RyaW5nKDE2KS5zbGljZSgxKX1gOwogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gZ2V0Q29udHJhc3RDb2xvcihbciwgZywgYl0pIHsKICAgICAgICAgICAgY29uc3QgYnJpZ2h0bmVzcyA9IChyICogMjk5ICsgZyAqIDU4NyArIGIgKiAxMTQpIC8gMTAwMDsKICAgICAgICAgICAgcmV0dXJuIGJyaWdodG5lc3MgPiAxMjggPyAiIzAwMDAwMCIgOiAiI0ZGRkZGRiI7CiAgICAgICAgfQoKICAgICAgICBsZXQgY29sb3JJbmRleCA9IDA7CiAgICAgICAgbGV0IHByb2dyZXNzID0gMDsKICAgICAgICBsZXQgZGlyZWN0aW9uID0gMTsKCiAgICAgICAgZnVuY3Rpb24gYW5pbWF0ZUdyYWRpZW50KCkgewogICAgICAgICAgICBwcm9ncmVzcyArPSBkaXJlY3Rpb24gKiAwLjAwMjsKICAgICAgICAgICAgaWYgKHByb2dyZXNzID49IDEpIHsKICAgICAgICAgICAgICAgIHByb2dyZXNzID0gMDsKICAgICAgICAgICAgICAgIGNvbG9ySW5kZXggPSAoY29sb3JJbmRleCArIDEpICUgdW5pcXVlQ29sb3JzLmxlbmd0aDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IG5leHRDb2xvckluZGV4ID0gKGNvbG9ySW5kZXggKyAxKSAlIHVuaXF1ZUNvbG9ycy5sZW5ndGg7CgogICAgICAgICAgICBmdW5jdGlvbiBpbnRlcnBvbGF0ZUNvbG9yKGNvbG9yQSwgY29sb3JCLCBmYWN0b3IpIHsKICAgICAgICAgICAgICAgIHJldHVybiBjb2xvckEubWFwKChjLCBpKSA9PiBNYXRoLnJvdW5kKGMgKyAoY29sb3JCW2ldIC0gYykgKiBmYWN0b3IpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgbGV0IGludGVycG9sYXRlZDEgPSBpbnRlcnBvbGF0ZUNvbG9yKHVuaXF1ZUNvbG9yc1tjb2xvckluZGV4XSwgdW5pcXVlQ29sb3JzW25leHRDb2xvckluZGV4XSwgcHJvZ3Jlc3MpOwogICAgICAgICAgICBsZXQgaW50ZXJwb2xhdGVkMiA9IGludGVycG9sYXRlQ29sb3IodW5pcXVlQ29sb3JzWyhjb2xvckluZGV4ICsgMikgJSB1bmlxdWVDb2xvcnMubGVuZ3RoXSwgdW5pcXVlQ29sb3JzWyhuZXh0Q29sb3JJbmRleCArIDIpICUgdW5pcXVlQ29sb3JzLmxlbmd0aF0sIHByb2dyZXNzKTsKCiAgICAgICAgICAgIGxldCBiZ0NvbG9yMSA9IHJnYlRvSGV4KGludGVycG9sYXRlZDEpOwogICAgICAgICAgICBsZXQgYmdDb2xvcjIgPSByZ2JUb0hleChpbnRlcnBvbGF0ZWQyKTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gYGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgJHtiZ0NvbG9yMX0sICR7YmdDb2xvcjJ9KWA7CgogICAgICAgICAgICAvLyBSZW1vdmVkIGxvZ2ljIHRvIGNoYW5nZSBoMiB0ZXh0IGNvbG9yLgogICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZUdyYWRpZW50KTsKICAgICAgICB9CgogICAgICAgIGFuaW1hdGVHcmFkaWVudCgpOwogICAgfTsKfQoKLy8gY29sb3JzCgpuYW1lX2ljb24oIlNHOXRaU0JRWVdkbCIsICIiKTsKc2V0X2JhY2tncm91bmQoIiIpOwoKPC9zY3JpcHQ+PC9odG1sPgo="}